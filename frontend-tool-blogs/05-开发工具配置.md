# 开发工具配置 - 打造极致的开发体验

## 前言

工欲善其事，必先利其器。作为现代前端开发者，合适的开发工具和配置能大幅提升你的开发效率和代码质量。本文将详细介绍各种开发工具的配置和使用，从编辑器到调试工具，让你拥有一个完美的开发环境。

## VSCode编辑器配置

### 核心插件推荐
```json
// 推荐插件列表
{
    "recommendations": [
        "dbaeumer.vscode-eslint",          // ESLint
        "esbenp.prettier-vscode",          // Prettier
        "ms-vscode.vscode-typescript-next", // TypeScript
        "bradlc.vscode-tailwindcss",       // Tailwind CSS
        "ms-vscode.vscode-json",            // JSON
        "ritwickdey.liveserver",            // Live Server
        "ms-vscode.debugger-for-chrome",    // Chrome Debugger
        "formulahendry.code-runner",        // Code Runner
        "christian-kohler.path-intellisense", // Path Intellisense
        "streetsidesoftware.code-spell-checker", // 拼写检查
        "wix.vscode-import-cost",          // 包大小分析
        "eamodio.gitlens",                 // Git 增强
        "ms-vscode.vscode-node-debug-pack", // Node.js 调试
        "visualstudioexptteam.vscodeintellicode" // AI 代码补全
    ]
}
```

### VSCode工作区配置
```json
// .vscode/settings.json
{
    // 编辑器配置
    "editor.fontSize": 14,
    "editor.lineHeight": 1.6,
    "editor.tabSize": 2,
    "editor.insertSpaces": true,
    "editor.wordWrap": "on",
    "editor.formatOnSave": true,
    "editor.formatOnPaste": true,
    "editor.renderWhitespace": "boundary",
    "editor.suggestSelection": "first",
    "editor.codeActionsOnSave": {
        "source.fixAll.eslint": true,
        "source.fixAll.format": true
    },

    // 文件配置
    "files.encoding": "utf8",
    "files.autoSave": "afterDelay",
    "files.autoSaveDelay": 1000,
    "files.exclude": {
        "**/.git": true,
        "**/.svn": true,
        "**/.hg": true,
        "**/CVS": true,
        "**/.DS_Store": true,
        "**/node_modules": true,
        "**/dist": true,
        "**/build": true
    },
    "files.associations": {
        "*.js": "javascript",
        "*.jsx": "javascriptreact",
        "*.ts": "typescript",
        "*.tsx": "typescriptreact",
        "*.vue": "vue"
    },

    // 搜索配置
    "search.exclude": {
        "**/node_modules": true,
        "**/dist": true,
        "**/build": true
    },

    // ESLint配置
    "eslint.enable": true,
    "eslint.validate": [
        "javascript",
        "javascriptreact",
        "typescript",
        "typescriptreact",
        "vue"
    ],

    // Prettier配置
    "prettier.enable": true,
    "prettier.requireConfig": true,
    "prettier.useEditorConfig": true,

    // Terminal配置
    "terminal.integrated.shell.osx": "/bin/zsh",
    "terminal.integrated.fontFamily": "MesloLGS NF",
    "terminal.integrated.fontSize": 13,

    // 工作区配置
    "workspace.snippets.enable": true,
    "emmet.includeLanguages": {
        "javascript": "javascriptreact",
        "typescript": "typescriptreact",
        "vue-html": "html"
    },

    // 调试配置
    "debug.openDebug": "openOnDebugBreak",
    "debug.internalConsoleOptions": "openOnSessionStart",

    // 其他配置
    "git.enableSmartCommit": true,
    "git.autofetch": true,
    "telemetry.enableTelemetry": false,
    "update.mode": "none"
}
```

### 代码片段配置
```json
// .vscode/javascript.json
{
    "JavaScript Console Log": {
        "prefix": "cl",
        "body": [
            "console.log('$1', $1);"
        ],
        "description": "Console log"
    },
    "JavaScript Function": {
        "prefix": "func",
        "body": [
            "function ${1:name}(${2:params}) {",
            "    ${3:// body}",
            "}"
        ],
        "description": "JavaScript function"
    },
    "JavaScript Arrow Function": {
        "prefix": "arrow",
        "body": [
            "const ${1:name} = (${2:params}) => {",
            "    ${3:// body}",
            "};"
        ],
        "description": "Arrow function"
    },
    "JavaScript Class": {
        "prefix": "class",
        "body": [
            "class ${1:ClassName} {",
            "    constructor(${2:params}) {",
            "        ${3:// constructor body}",
            "    }",
            "",
            "    ${4:// methods}",
            "}"
        ],
        "description": "JavaScript class"
    },
    "Try Catch": {
        "prefix": "try",
        "body": [
            "try {",
            "    ${1:// try block}",
            "} catch (${2:error}) {",
            "    ${3:// catch block}",
            "}"
        ],
        "description": "Try catch block"
    }
}
```

### 调试配置
```json
// .vscode/launch.json
{
    "version": "0.2.0",
    "configurations": [
        {
            "name": "Launch Chrome",
            "type": "chrome",
            "request": "launch",
            "url": "http://localhost:3000",
            "webRoot": "${workspaceFolder}/src",
            "sourceMaps": true,
            "userDataDir": false
        },
        {
            "name": "Attach to Chrome",
            "type": "chrome",
            "request": "attach",
            "port": 9222,
            "webRoot": "${workspaceFolder}/src",
            "url": "http://localhost:3000"
        },
        {
            "name": "Launch Node.js",
            "type": "node",
            "request": "launch",
            "program": "${workspaceFolder}/app.js",
            "console": "integratedTerminal",
            "internalConsoleOptions": "openOnSessionStart"
        },
        {
            "name": "Debug Tests",
            "type": "node",
            "request": "launch",
            "program": "${workspaceFolder}/node_modules/.bin/jest",
            "args": [
                "--runInBand",
                "--config",
                "jest.config.js"
            ],
            "console": "integratedTerminal",
            "internalConsoleOptions": "neverOpen"
        },
        {
            "name": "Nodemon",
            "type": "node",
            "request": "launch",
            "program": "${workspaceFolder}/app.js",
            "runtimeExecutable": "nodemon",
            "restart": true,
            "console": "integratedTerminal",
            "internalConsoleOptions": "neverOpen"
        }
    ]
}
```

## 任务配置
```json
// .vscode/tasks.json
{
    "version": "2.0.0",
    "tasks": [
        {
            "label": "Start Development Server",
            "type": "shell",
            "command": "npm run dev",
            "group": {
                "kind": "build",
                "isDefault": true
            },
            "presentation": {
                "echo": true,
                "reveal": "always",
                "focus": false,
                "panel": "shared"
            },
            "problemMatcher": []
        },
        {
            "label": "Build Project",
            "type": "shell",
            "command": "npm run build",
            "group": "build",
            "presentation": {
                "echo": true,
                "reveal": "always",
                "focus": false,
                "panel": "shared"
            },
            "problemMatcher": []
        },
        {
            "label": "Run Tests",
            "type": "shell",
            "command": "npm test",
            "group": "test",
            "presentation": {
                "echo": true,
                "reveal": "always",
                "focus": false,
                "panel": "shared"
            },
            "problemMatcher": []
        },
        {
            "label": "Install Dependencies",
            "type": "shell",
            "command": "npm install",
            "problemMatcher": []
        },
        {
            "label": "Clean Project",
            "type": "shell",
            "command": "rm -rf node_modules dist build",
            "problemMatcher": []
        }
    ]
}
```

## 终端配置

### Zsh配置
```bash
# ~/.zshrc
# 导入Oh My Zsh配置
export ZSH="$HOME/.oh-my-zsh"
ZSH_THEME="agnoster"
plugins=(git npm node yarn docker kubectl)

source $ZSH/oh-my-zsh.sh

# 自定义别名
alias gs="git status"
alias gc="git commit"
alias gp="git push"
alias gl="git pull"
alias ga="git add"
alias gd="git diff"
alias gb="git branch"
alias gco="git checkout"

# npm别名
alias ni="npm install"
alias nid="npm install --save-dev"
alias nrs="npm run start"
alias nrb="npm run build"
alias nrt="npm run test"
alias nrd="npm run dev"

# 目录别名
alias ..="cd .."
alias ...="cd ../.."
alias ....="cd ../../.."
alias ~="cd ~"

# 工具别名
alias cls="clear"
alias ll="ls -la"
alias la="ls -a"
alias mkdir="mkdir -p"

# 环境变量
export EDITOR="code"
export VISUAL="code"
export PAGER="less"
export LESS="-R"

# Node.js版本管理
export NVM_DIR="$HOME/.nvm"
[ -s "$NVM_DIR/nvm.sh" ] && \. "$NVM_DIR/nvm.sh"
[ -s "$NVM_DIR/bash_completion" ] && \. "$NVM_DIR/bash_completion"

# PATH配置
export PATH="$HOME/.npm-global/bin:$PATH"
export PATH="./node_modules/.bin:$PATH"

# 函数
mkcd() {
    mkdir -p "$1" && cd "$1"
}

take() {
    mkdir -p "$1"
    cd "$1"
}

# 项目相关函数
dev() {
    if [ -f "package.json" ]; then
        npm run dev
    else
        echo "No package.json found"
    fi
}

build() {
    if [ -f "package.json" ]; then
        npm run build
    else
        echo "No package.json found"
    fi
}

test() {
    if [ -f "package.json" ]; then
        npm test
    else
        echo "No package.json found"
    fi
}
```

### Git配置
```bash
# ~/.gitconfig
[user]
    name = Your Name
    email = your.email@example.com

[core]
    editor = code
    autocrlf = input
    safecrlf = true
    ignorecase = false

[init]
    defaultBranch = main

[alias]
    # 状态别名
    st = status
    co = checkout
    br = branch
    ci = commit
    sta = stash
    pop = stash pop

    # 日志别名
    lg = log --oneline --graph --decorate --all
    ll = log --oneline
    la = log --oneline --author
    lt = log --oneline --since="1 week ago"

    # 提交别名
    amend = commit --amend
    cm = commit -m
    ca = commit -am
    cma = commit --amend --no-edit

    # 分支别名
    nb = checkout -b
    bd = branch -d
    bD = branch -D

    # 远程别名
    pusho = push origin
    pullo = pull origin
    clo = clone

    # 撤销别名
    unstage = reset HEAD --
    undo = reset --soft HEAD^
    scrap = reset --hard HEAD

[merge]
    tool = vscode

[mergetool "vscode"]
    cmd = code --wait $MERGED

[diff]
    tool = vscode

[difftool "vscode"]
    cmd = code --wait --diff $LOCAL $REMOTE

[color]
    ui = auto

[color "branch"]
    current = yellow reverse
    local = yellow
    remote = green

[color "diff"]
    meta = yellow bold
    frag = magenta bold
    old = red
    new = green

[color "status"]
    added = green
    changed = yellow
    untracked = red
```

## Docker配置

### Dockerfile示例
```dockerfile
# Node.js开发环境
FROM node:18-alpine

# 安装必要的系统包
RUN apk add --no-cache \
    git \
    bash \
    zsh \
    curl \
    wget

# 安装Oh My Zsh
RUN sh -c "$(curl -fsSL https://raw.github.com/ohmyzsh/ohmyzsh/master/tools/install.sh)" "" --unattended

# 安装插件
RUN git clone https://github.com/zsh-users/zsh-autosuggestions ${ZSH_CUSTOM:-~/.oh-my-zsh/custom}/plugins/zsh-autosuggestions
RUN git clone https://github.com/zsh-users/zsh-syntax-highlighting ${ZSH_CUSTOM:-~/.oh-my-zsh/custom}/plugins/zsh-syntax-highlighting

# 配置zsh
RUN sed -i 's/plugins=(git)/plugins=(git zsh-autosuggestions zsh-syntax-highlighting npm node docker)/g' ~/.zshrc

# 设置工作目录
WORKDIR /workspace

# 切换到zsh
CMD [ "zsh" ]
```

### Docker Compose配置
```yaml
# docker-compose.yml
version: '3.8'

services:
  app:
    build: .
    volumes:
      - .:/workspace
      - node_modules:/workspace/node_modules
    ports:
      - "3000:3000"
      - "9229:9229"
    environment:
      - NODE_ENV=development
      - CHOKIDAR_USEPOLLING=true
    command: zsh

  db:
    image: mongo:5
    ports:
      - "27017:27017"
    volumes:
      - mongodb_data:/data/db
    environment:
      MONGO_INITDB_ROOT_USERNAME: admin
      MONGO_INITDB_ROOT_PASSWORD: password

  redis:
    image: redis:7-alpine
    ports:
      - "6379:6379"
    volumes:
      - redis_data:/data

volumes:
  node_modules:
  mongodb_data:
  redis_data:
```

## 调试工具配置

### Chrome DevTools配置
```javascript
// 在代码中添加调试器
const debug = require('debug')('app:server');

// 使用debug
debug('Server starting on port %d', port);

// 条件断点
if (process.env.DEBUG) {
    console.log('Debug mode enabled');
}

// 性能监控
const perf = {
    start: Date.now(),
    mark: (label) => {
        console.log(`[PERF] ${label}: ${Date.now() - perf.start}ms`);
    }
};
```

### Node.js检查器
```javascript
// 启用检查器
node --inspect app.js
node --inspect-brk app.js  // 在第一行断点

// 在代码中启用
const inspector = require('inspector');
inspector.open(9229, '0.0.0.0', true);
```

## 监控和日志配置

### Winston日志配置
```javascript
// logger.js
const winston = require('winston');
const { combine, timestamp, printf, colorize, errors } = winston.format;

const logFormat = printf(({ level, message, timestamp, stack }) => {
    return `${timestamp} [${level}]: ${stack || message}`;
});

const logger = winston.createLogger({
    level: process.env.LOG_LEVEL || 'info',
    format: combine(
        errors({ stack: true }),
        timestamp(),
        logFormat
    ),
    transports: [
        new winston.transports.Console({
            format: combine(
                colorize(),
                errors({ stack: true }),
                timestamp(),
                logFormat
            )
        }),
        new winston.transports.File({
            filename: 'logs/error.log',
            level: 'error',
            format: combine(
                errors({ stack: true }),
                timestamp(),
                logFormat
            )
        }),
        new winston.transports.File({
            filename: 'logs/combined.log',
            format: combine(
                errors({ stack: true }),
                timestamp(),
                logFormat
            )
        })
    ]
});

module.exports = logger;
```

### PM2配置
```javascript
// ecosystem.config.js
module.exports = {
    apps: [{
        name: 'my-app',
        script: 'app.js',
        instances: 'max',
        exec_mode: 'cluster',
        env: {
            NODE_ENV: 'development',
            PORT: 3000
        },
        env_production: {
            NODE_ENV: 'production',
            PORT: 8080
        },
        log_file: 'logs/combined.log',
        out_file: 'logs/out.log',
        error_file: 'logs/error.log',
        log_date_format: 'YYYY-MM-DD HH:mm:ss Z',
        merge_logs: true,
        max_memory_restart: '1G',
        watch: false,
        max_restarts: 5,
        min_uptime: '10s',
        node_args: '--max-old-space-size=1024'
    }]
};
```

## 实用脚本配置

### package.json脚本
```json
{
    "scripts": {
        "dev": "nodemon app.js",
        "start": "node app.js",
        "build": "webpack --mode production",
        "test": "jest",
        "test:watch": "jest --watch",
        "test:coverage": "jest --coverage",
        "lint": "eslint src --ext .js,.jsx,.ts,.tsx",
        "lint:fix": "eslint src --ext .js,.jsx,.ts,.tsx --fix",
        "format": "prettier --write src/**/*.{js,jsx,ts,tsx,json,css,scss,md}",
        "format:check": "prettier --check src/**/*.{js,jsx,ts,tsx,json,css,scss,md}",
        "clean": "rm -rf node_modules dist build logs",
        "reinstall": "npm run clean && npm install",
        "analyze": "webpack-bundle-analyzer stats.json",
        "deploy": "npm run build && npm run test && npm run lint",
        "prepare": "husky install",
        "commit": "git-cz",
        "release": "standard-version",
        "docker:build": "docker build -t my-app .",
        "docker:run": "docker run -p 3000:3000 my-app",
        "docker:dev": "docker-compose up",
        "logs": "pm2 logs",
        "logs:clear": "pm2 flush",
        "monitor": "pm2 monit"
    }
}
```

### 自动化脚本
```bash
#!/bin/bash
# scripts/setup.sh
set -e

echo "🚀 开始设置开发环境..."

# 检查Node.js版本
if ! command -v node &> /dev/null; then
    echo "❌ Node.js未安装，请先安装Node.js"
    exit 1
fi

# 检查npm版本
if ! command -v npm &> /dev/null; then
    echo "❌ npm未安装，请先安装npm"
    exit 1
fi

echo "📦 安装依赖..."
npm install

echo "🔧 设置Git hooks..."
npm run prepare

echo "📋 检查代码格式..."
npm run format:check

echo "🧪 运行测试..."
npm test

echo "✅ 开发环境设置完成！"
echo "🎉 开始你的开发之旅吧！"
```

## 性能监控配置

### New Relic配置
```javascript
// newrelic.js
exports.config = {
    app_name: ['My Application'],
    license_key: 'YOUR_LICENSE_KEY',
    logging: {
        level: 'info'
    },
    allow_all_headers: true,
    attributes: {
        exclude: [
            'request.headers.cookie',
            'request.headers.authorization',
            'request.headers.proxyAuthorization',
            'request.headers.set-cookie*',
            'request.headers.x-*',
            'response.headers.cookie',
            'response.headers.set-cookie*',
            'response.headers.x-*'
        ]
    }
};
```

### Sentry配置
```javascript
// sentry.js
const Sentry = require('@sentry/node');
const { nodeProfilingIntegration } = require('@sentry/profiling-node');

Sentry.init({
    dsn: 'YOUR_DSN',
    integrations: [
        nodeProfilingIntegration()
    ],
    tracesSampleRate: 1.0,
    profilesSampleRate: 1.0,
});

module.exports = Sentry;
```

## 常见问题解答

### Q: VSCode启动缓慢怎么办？
A: 禁用不必要的插件、清理缓存、增加内存限制、使用工作区设置。

### Q: 如何管理多个Node.js版本？
A: 使用nvm或fnm进行版本管理，创建.nvmrc文件指定项目版本。

### Q: 调试时断点不生效怎么办？
A: 确保sourceMaps配置正确，检查文件路径映射，使用--inspect-brk启动。

## 总结

通过本文的学习，你已经掌握了：

1. VSCode编辑器的完整配置
2. 终端和Shell的优化设置
3. 调试工具的配置和使用
4. 日志和监控系统的搭建
5. 自动化脚本的编写
6. Docker开发环境的配置
7. 各种实用工具的集成

一个好的开发环境能大幅提升你的开发效率和幸福感。建议你根据自己的习惯逐步调整和优化这些配置，打造最适合自己的开发环境。

下一步，我们将学习项目部署，将你的应用部署到生产环境。

---

**扩展阅读：**
- [VSCode文档](https://code.visualstudio.com/docs)
- [Oh My Zsh文档](https://ohmyz.sh/)
- [Docker文档](https://docs.docker.com/)

**练习项目：**
1. 创建自己的开发环境配置包
2. 搭建一个完整的Docker开发环境
3. 实现一个自动化部署脚本